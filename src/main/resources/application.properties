# Server Configuration
server.port=8081

# Spring Application
spring.application.name=dms-backend

# PostgreSQL Database Configuration
spring.datasource.url=jdbc:postgresql://postgres:5432/genifast
spring.datasource.username=postgres
spring.datasource.password=genifast
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
# Chỉ định schema mặc định cho các bảng nghiệp vụ (JPA) là 'public'
spring.jpa.properties.hibernate.default_schema=public

# Redis Configuration
spring.data.redis.host=redis
spring.data.redis.port=6379

# Kafka Configuration
spring.kafka.bootstrap-servers=kafka:9092
spring.kafka.consumer.group-id=group.local
# Add other Kafka properties as needed

# Mail Configuration [Source: 125]
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=imt.pitech@gmail.com
spring.mail.password=wvge kpwl scog rluq
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

spring.output.ansi.enabled=always

# Config timezone
spring.jackson.time-zone=Asia/Ho_Chi_Minh

# Config upload file
storage.location=./uploads
storage.bpmn.location=bpmn
storage.svg.location=svg
storage.local.base-url=/storage
preview.location=file:./uploads/

# Giới hạn tổng request size
spring.servlet.multipart.max-request-size=50MB
# Giới hạn size từng file
spring.servlet.multipart.max-file-size=50MB

# base URL for shared documents
shared.document.base-url=http://be-java:8080/api/public/documents/share/

# --- Custom Application Properties ---

# === Application Info ===
application.app-info.host=be-java
application.app-info.name=be-capstone-project

# === Kafka Config ===
application.kafka.brokers=kafka:9092
application.kafka.group-id=group.local
application.kafka.topic-test=capstone-test
application.kafka.enable-tls=false
application.kafka.max-retry=1
application.kafka.insecure-skip-verify=true

# === JWT Config ===
application.jwt.access-token-public-key=classpath:keys/access_token_public.pem
application.jwt.access-token-private-key=classpath:keys/access_token_private.pem
application.jwt.access-token-duration=3600s

# === Email Config ===
application.email.sender-email=imt.pitech@gmail.com
application.email.sender-password=wvge kpwl scog rluq
application.email.link-verify-email=http://localhost:5173/verifired
application.email.link-join-organization=http://localhost:5173/accepted-join
application.email.link-reset-password=http://localhost:5173/reset-password
application.email.template-verify-email=verify_email
application.email.template-reset-password=reset_password
application.email.template-organization-inv=organization_invitation

# === Reset-Password Config ===
application.reset-password.token-ttl=6000s
application.reset-password.private-key=classpath:keys/reset_password_private.pem
application.reset-password.public-key=classpath:keys/reset_password_public.pem


# ===================================================================
# CAMUNDA BPMN PLATFORM
# ===================================================================

# CAMUNDA BPM PLATFORM DATASOURCE (Schema: camunda)
# ===================================================================
camunda.datasource.url=jdbc:postgresql://postgres:5432/genifast?currentSchema=camunda
camunda.datasource.username=postgres
camunda.datasource.password=genifast
camunda.datasource.driver-class-name=org.postgresql.Driver

# Bật tính năng tự động cập nhật schema database của Camunda
camunda.bpm.database.schema-update=true

# Mức độ lưu trữ lịch sử các tiến trình
camunda.bpm.history-level=full

# Không sử dụng hệ thống quản lý định danh (user/group) sẵn có của Camunda
# vì chúng ta sẽ tích hợp với hệ thống user của dms-backend
camunda.bpm.db-identity-used=false

# Bỏ qua việc kiểm tra file định nghĩa quy trình khi khởi động
camunda.bpm.check-process-definitions=false

# ===================================================================
# AZURE BLOB STORAGE CONFIGURATION (DISABLED - USING LOCAL STORAGE)
# ===================================================================

# Thay thế bằng thông tin tài khoản Azure Storage của bạn
azure.storage.account-name=dmsmanagement
azure.storage.account-key=ZRAH+87HUazidjNSD1RbgxyLwaCnyxZUtRx6B0JGSTcacuUW4HHC67lygfshUDG899DWAepqAOdI+AStyV9K5g==
azure.storage.endpoint=https:/dmsmanagement.blob.core.windows.net
azure.storage.container-name=dms

# === Local Storage Configuration ===
# Thư mục lưu trữ file tải lên (đường dẫn tương đối hoặc tuyệt đối)
storage.local.path=./uploads
# Base URL để truy cập file tải lên
storage.local.base-url=/api/files

# === Keycloak Integration ===
# spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8180/realms/dms-genifast
# spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://localhost:8180/realms/dms-genifast/protocol/openid-connect/certs

# # Client credentials for backend-to-backend communication if needed in the future
# spring.security.oauth2.client.registration.keycloak.client-id=dms-backend-client
# spring.security.oauth2.client.registration.keycloak.client-secret=Egnp3uh5U7sOhi5DI5Kws0xuTxz6FeqY
# spring.security.oauth2.client.registration.keycloak.authorization-grant-type=client_credentials
# spring.security.oauth2.client.provider.keycloak.issuer-uri=${spring.security.oauth2.resourceserver.jwt.issuer-uri}

# # === Keycloak Admin Client ===
# keycloak.auth-server-url=http://localhost:8180
# keycloak.realm=dms-genifast
# keycloak.resource=dms-backend-client
# keycloak.credentials.secret=Egnp3uh5U7sOhi5DI5Kws0xuTxz6FeqY